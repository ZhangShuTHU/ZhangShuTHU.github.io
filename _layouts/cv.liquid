---
layout: default
---
<div class="post">
  <header class="post-header">
    <h1 class="post-title">{{ page.title }}</h1>
    {% if page.description %}
      <p class="post-description">{{ page.description }}</p>
    {% endif %}
  </header>

  {% comment %} PDF embed with language toggle (default EN). Override via page.cv_pdf_en / page.cv_pdf_cn {% endcomment %}
  {% assign en_file = page.cv_pdf_en | default: 'ZhangShu_CV_EN.pdf' %}
  {% assign cn_file = page.cv_pdf_cn | default: 'PDFZhangShu_CV_CN.pdf' %}

  {% if en_file contains '://' %}
    {% assign en_url = en_file %}
  {% else %}
    {% assign en_url = en_file | prepend: 'assets/pdf/' | relative_url %}
  {% endif %}

  {% if cn_file contains '://' %}
    {% assign cn_url = cn_file %}
  {% else %}
    {% assign cn_url = cn_file | prepend: 'assets/pdf/' | relative_url %}
  {% endif %}

  <div class="cv-pdf-controls mt-3">
    <button id="btn-cv-en" class="btn btn-sm btn-primary" aria-pressed="true">English</button>
    <button id="btn-cv-cn" class="btn btn-sm btn-outline-secondary" aria-pressed="false">中文</button>
    <a href="{{ en_url }}" id="cv-download-link" class="btn btn-sm btn-link float-right" target="_blank" rel="noopener noreferrer">在新窗口打开</a>
  </div>
  <div class="pdf-viewer mt-2">
    <object id="cv-pdf" data="{{ en_url }}" type="application/pdf" width="100%" height="800px">
      <p>
        无法内嵌显示 PDF。你可以
        <a id="cv-fallback" href="{{ en_url }}" target="_blank" rel="noopener noreferrer">点击这里在新窗口打开</a>。
      </p>
    </object>
  </div>

  <script>
    (function () {
      var en = "{{ en_url }}";
      var cn = "{{ cn_url }}";
      var viewer = document.getElementById('cv-pdf');
      var btnEn = document.getElementById('btn-cv-en');
      var btnCn = document.getElementById('btn-cv-cn');
      var download = document.getElementById('cv-download-link');
      var fallback = document.getElementById('cv-fallback');

      function setLang(lang) {
        var url = (lang === 'cn') ? cn : en;
        if (viewer) viewer.setAttribute('data', url);
        if (download) download.setAttribute('href', url);
        if (fallback) fallback.setAttribute('href', url);

        if (btnEn && btnCn) {
          var enActive = (lang !== 'cn');
          btnEn.classList.toggle('btn-primary', enActive);
          btnEn.classList.toggle('btn-outline-primary', !enActive);
          btnEn.setAttribute('aria-pressed', enActive);

          btnCn.classList.toggle('btn-primary', !enActive);
          btnCn.classList.toggle('btn-outline-secondary', enActive);
          btnCn.setAttribute('aria-pressed', !enActive);
        }

        try { localStorage.setItem('cv_lang', lang); } catch (e) {}
      }

      if (btnEn) btnEn.addEventListener('click', function () { setLang('en'); });
      if (btnCn) btnCn.addEventListener('click', function () { setLang('cn'); });

      var saved = null;
      try { saved = localStorage.getItem('cv_lang'); } catch (e) {}
      setLang(saved === 'cn' ? 'cn' : 'en');
    })();
  </script>
</div>
